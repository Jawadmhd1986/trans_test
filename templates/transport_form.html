<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Transportation Quotation</title>

  <!-- Styles (keep your existing file) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <section class="quote-section">
    <!-- DSV logo -->
    <img class="dsv-logo" src="{{ url_for('static', filename='dsv_logo.png') }}" alt="DSV" />

    <!-- Card -->
    <div class="quote-card">
      <h1 class="title">Transportation Quotation</h1>

      <form id="quote-form" action="{{ url_for('generate_transport') }}" method="POST" novalidate>

        <!-- ============ FROM / TO (MULTI-ROUTE) ============ -->
        <div class="block">
          <div class="block-title">From</div>
          <div id="routes">
            <!-- first route row -->
            <div class="form-row route-row">
              <div class="form-group">
                <label>From</label>
                <select name="origin[]" required>
                  <option value="">— Select Pickup —</option>
                  {% for o in origins %}
                    <option>{{ o }}</option>
                  {% endfor %}
                </select>
              </div>

              <div class="form-group">
                <label>To</label>
                <select name="destination[]" required>
                  <option value="">— Select City —</option>
                  {% for d in destinations %}
                    <option>{{ d }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
          </div>

          <!-- add buttons row (truck + NEW route) -->
          <div class="btn-row">
            <button type="button" id="add-truck" class="btn-add">+ Add Truck Type</button>
            <button type="button" id="add-route" class="btn-add">+ Add From / To</button>
          </div>
        </div>

        <!-- ============ TRUCK TYPES ============ -->
        <div class="block">
          <div class="block-title">Truck Types</div>

          <!-- Trip Type (global) -->
          <div class="trip-toggle">
            <input type="radio" id="trip-one" name="trip_type" value="one_way" checked>
            <label for="trip-one" class="btn-toggle">One Way</label>

            <input type="radio" id="trip-back" name="trip_type" value="back_load">
            <label for="trip-back" class="btn-toggle">Back Load</label>
          </div>

          <!-- truck rows container -->
          <div id="trucks" class="truck-rows">
            <div class="form-row truck-row">
              <div class="form-group">
                <label>Type</label>
                <select name="truck_type[]" required>
                  <option value="">— Select Truck Type —</option>
                  {% for key, label in truck_labels.items() %}
                    <option value="{{ label }}">{{ label }}</option>
                  {% endfor %}
                </select>
              </div>

              <div class="form-group">
                <label>QTY</label>
                <input type="number" name="truck_qty[]" min="1" step="1" value="1" required>
              </div>

              <!-- (optional) per-row trip kind, aligns with backend if present -->
              <input type="hidden" name="trip_kind[]" value="">
            </div>
          </div>
        </div>

        <!-- ============ CARGO TYPE ============ -->
        <div class="block">
          <div class="block-title">Cargo Type</div>
          <div class="form-group">
            <select name="cargo_type">
              <option value="general" selected>General Cargo</option>
              <option value="chemical">Chemical Load</option>
            </select>
          </div>
        </div>

        <!-- SUBMIT -->
        <div class="actions">
          <button class="btn-primary" type="submit">Generate</button>
        </div>
      </form>
    </div>

    <!-- Floating chat button & window (unchanged assets) -->
    <button class="chat-toggle" type="button" aria-label="Open chat">
      <img src="{{ url_for('static', filename='chat-icon.png') }}" alt="" />
    </button>

    <div class="chat-window" id="chatWin" aria-live="polite" hidden>
      <div class="chat-header">
        <div class="chat-title">
          <span class="logo"></span>
          <span>DSV Chat</span>
        </div>
        <button id="chat-close" type="button" title="Close">✕</button>
      </div>

      <div class="chat-body" id="chat-box"></div>

      <div class="chat-footer">
        <input id="chat-input" type="text" placeholder="Type a message..." />
        <button id="chat-send" type="button">Send</button>
      </div>
    </div>
  </section>

  <!-- Scripts (keep your existing file) -->
  <script defer src="{{ url_for('static', filename='chatbot.js') }}"></script>
</body>
</html>
